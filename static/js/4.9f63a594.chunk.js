(this["webpackJsonpreact-app-photo"]=this["webpackJsonpreact-app-photo"]||[]).push([[4],{693:function(e,t,a){},694:function(e,t,a){},736:function(e,t,a){},739:function(e,t,a){},740:function(e,t,a){},741:function(e,t,a){},764:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a(6),l=a(54),r=(a(306),a(748)),o=a(91),i=a(603),s=a.n(i),u=a(29),d=[{value:1,label:"Food and Drink"},{value:2,label:"Wallpapers"},{value:3,label:"Nature"},{value:4,label:"Love"},{value:5,label:"People"},{value:6,label:"Animals"},{value:7,label:"Architecture - Ki\u1ebfn tr\xfac"},{value:8,label:"Interiors - N\u1ed9i th\u1ea5t"},{value:9,label:"Fashion"},{value:10,label:"Street Photography"},{value:11,label:"Textures & Patterns"},{value:12,label:"Technology"},{value:13,label:"Travel"},{value:14,label:"Sport"},{value:15,label:"Spirituality - T\xe2m linh"},{value:16,label:"Arts & Culture"},{value:17,label:"Film"},{value:18,label:"Vihicle"},{value:19,label:"Others"}],j=a(621),b=a(766),h=a(1);function O(e){var t=e.label,a=e.name,c=e.placeholder,n=e.type;return Object(h.jsx)(j.a,{label:t,name:a,children:Object(h.jsx)(b.a,{name:a,placeholder:c,type:n,size:"large",fast:!0})})}O.defaultProps={label:"",placeholder:"",type:"text",disabled:!1};var p=O,f=a(691),v=a.n(f),m=a(692),x=a(761);a(693);function g(e){var t=e.field,a=e.form,n=e.label,r=e.isAddMode,i=t.name,s=t.value,u=Object(c.useState)(""),d=Object(l.a)(u,2),O=d[0],p=d[1],f=Object(c.useState)(""),g=Object(l.a)(f,2),y=g[0],w=g[1],N=Object(c.useState)(!1),C=Object(l.a)(N,2),k=C[0],P=C[1];Object(c.useEffect)((function(){r&&S()}),[]);var S=function(){var e="https://source.unsplash.com/featured/?".concat(y);P(!0),function(){var t=Object(m.a)(v.a.mark((function t(){var c,n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:return c=t.sent,t.next=5,c.clone();case 5:n=t.sent,p(n.url),a.setFieldValue(i,n.url),P(!1);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()};return Object(h.jsxs)(j.a,{name:i,label:n,children:[Object(h.jsx)("div",{className:"photo-wrapper",children:Object(h.jsx)(x.a,{src:r?O:s,height:400,width:"100%",alt:"Awesome photo."})}),Object(h.jsxs)("div",{className:"photo-field",children:[Object(h.jsx)(b.a,{addonBefore:"Key",placeholder:"Eg: cat,dog",size:"large",allowClear:!0,value:y,onChange:function(e){return w(e.target.value)}}),Object(h.jsx)(o.a,{loading:k,size:"large",onClick:S,type:"primary",children:"Random"})]})]})}g.defaultProps={label:"",name:""};var y=g,w=a(765);a(694);var N=function(e){var t=e.label,a=e.name,c=e.placeholder,n=e.options;return Object(h.jsx)(j.a,{label:t,name:a,children:Object(h.jsx)(w.a,{name:a,placeholder:c,size:"large",children:n.map((function(e){return Object(h.jsx)(w.a.Option,{value:e.value,children:e.label},e.value)}))})})},C=a(142),k=a(756),P=a(757),S=a(742);var A=function(e){var t=e.onSubmited,a=e.initalValues,c=e.isAddMode,n=S.b().shape({title:S.c().required("This field is required!"),categoryId:S.a().required("This field is required!").nullable()});return Object(h.jsx)(C.c,{initialValues:a,validationSchema:n,onSubmit:t,children:function(e){e.values,e.errors,e.touched;return Object(h.jsxs)(k.a,{autoComplete:"off",layout:"vertical",children:[Object(h.jsx)(C.a,{name:"photoUrl",label:"Photo",component:y,isAddMode:c}),Object(h.jsx)(p,{label:"Title",name:"title",placeholder:"Eg: Cute puppy",type:"text"}),Object(h.jsx)(N,{label:"Category",name:"categoryId",placeholder:"what is category",options:d}),Object(h.jsx)(P.a,{disabled:!1,size:"large",type:"primary",htmlType:"submit",block:!0,children:c?"Add to gallery":"Update your photo"})]})}})},E=a(763),T=a(758),D=a(759),I=a(24),R=(a(736),E.a.Text);var _=function(e){var t=e.photos,a=e.handleRemovePhoto,c=e.handleEditPhoto,l=e.handleDownloadPhoto,r=Object(n.i)();return 0===t.length?Object(h.jsx)("div",{className:"text-center",children:Object(h.jsxs)(R,{type:"secondary",children:["Your gallery is empty.",Object(h.jsx)(I.b,{to:"".concat(r.url,"/add"),children:" Add a new photo"})]})}):Object(h.jsx)("div",{children:Object(h.jsx)(T.a,{gutter:[16,16],children:Object(h.jsx)(x.a.PreviewGroup,{children:t.map((function(e){return Object(h.jsx)(D.a,{xs:24,sm:12,lg:8,children:Object(h.jsx)(V,{data:e,handleRemovePhoto:a,handleEditPhoto:c,handleDownloadPhoto:l})},e.id)}))})})})},M=a(767),F=a(768),U=a(769),L=a(755),z=a(760);a(739);var V=function(e){var t=e.data,a=e.handleRemovePhoto,n=e.handleEditPhoto,r=e.handleDownloadPhoto,o=t.id,i=t.title,s=t.photoUrl,u=Object(c.useState)(!1),d=Object(l.a)(u,2),j=d[0],b=d[1],O=Object(c.useRef)(null);return Object(c.useEffect)((function(){document.addEventListener("click",(function(e){e.target.parentElement!==O.current&&b(!1)}))})),Object(h.jsxs)("div",{className:"photo-card","data-aos":"fade-up",children:[Object(h.jsx)(x.a,{height:400,width:"100%",src:s,alt:"Image of ".concat(i)}),Object(h.jsxs)("div",{className:"photo-card__meta",children:[Object(h.jsx)("span",{className:"photo-card__meta-item title",children:i}),Object(h.jsx)("div",{className:"photo-card__meta-item func",onClick:function(){b(!j)},children:Object(h.jsx)(M.a,{ref:O})}),j&&Object(h.jsxs)("div",{className:"popover",children:[Object(h.jsxs)("a",{onClick:function(){return r(s,i)},children:[Object(h.jsx)(F.a,{}),"Download"]}),Object(h.jsx)(z.a,{style:{margin:" 0"}}),Object(h.jsxs)("a",{onClick:function(){return a(o)},children:[Object(h.jsx)(U.a,{}),"Delete"]}),Object(h.jsx)(z.a,{style:{margin:" 0"}}),Object(h.jsxs)("a",{onClick:function(){return n(o)},children:[Object(h.jsx)(L.a,{}),"Edit"]})]})]})]})},q=a(753),B=a(754);a(740);var G=function(e){var t=e.categoryList,a=e.handleCategoryChange,n=e.currentCategory,r=Object(c.useState)(!1),o=Object(l.a)(r,2),i=o[0],s=o[1],u=Object(c.useRef)(null);return Object(c.useEffect)((function(){var e=u.current.offsetWidth,t=document.body.offsetWidth;s(t>1111?e>951:e>t-160)})),Object(h.jsxs)("div",{className:"category-bar",children:[Object(h.jsx)("button",{className:"category-item all ".concat(0===n?"active":""),onClick:function(){return a(0)},children:Object(h.jsx)("span",{children:"All"})}),Object(h.jsxs)("div",{className:"category-bar__wrap",children:[i&&Object(h.jsx)("div",{className:"category-btn left",onClick:function(){return u.current.scrollBy({left:-200})},children:Object(h.jsx)(q.a,{})}),i&&Object(h.jsx)("div",{className:"category-btn right",onClick:function(){return u.current.scrollBy({left:200})},children:Object(h.jsx)(B.a,{})}),!i&&Object(h.jsx)("div",{className:"divider"}),Object(h.jsx)("div",{ref:u,className:"category-bar__slide",children:t.map((function(e){var t=d.find((function(t){return t.value===e}));return Object(h.jsx)("button",{className:"category-item ".concat(n===t.value?"active":""),onClick:function(){return a(t.value)},children:Object(h.jsx)("span",{children:t.label})},t.value)}))})]})]})},W=a(61),J=a(62);a(741);var K=function(e){var t=Object(J.c)((function(e){return e.photos})),a=Object(c.useState)(!1),i=Object(l.a)(a,2),d=i[0],j=i[1],b=Object(c.useState)(t),O=Object(l.a)(b,2),p=O[0],f=O[1],v=Object(c.useState)(0),m=Object(l.a)(v,2),x=m[0],g=m[1],y=Object(c.useState)([]),w=Object(l.a)(y,2),N=w[0],C=w[1],k=Object(J.b)(),P=Object(n.g)(),S=Object(n.i)();return Object(c.useEffect)((function(){window.scrollTo(0,0);!function(){var e=[];t.forEach((function(t){e.push(t.categoryId)})),C(Array.from(new Set(e)))}(),function(){if(0===x)f(t);else{var e=t.filter((function(e){return e.categoryId===x}));f(e)}}()}),[t]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(u.a,{title:"Awesome Photos \ud83d\ude0d"}),Object(h.jsxs)("div",{className:"content container",children:[Object(h.jsxs)("div",{className:"gallery-top",children:[Object(h.jsx)("h2",{className:"gallery-title",children:" My Gallery "}),Object(h.jsx)(o.a,{type:"primary",className:"gallery-btn",children:Object(h.jsx)(I.b,{to:"".concat(S.url,"/add"),className:"gallery-link",children:"Add new photo"})})]}),0!==N.length&&Object(h.jsx)(G,{categoryList:N,handleCategoryChange:function(e){if(g(e),0===e)f(t);else{var a=t.filter((function(t){return t.categoryId===e}));f(a)}},currentCategory:x}),Object(h.jsx)(_,{photos:p,handleRemovePhoto:function(e){r.b.loading({content:"Deleting...",key:"remove"}),setTimeout((function(){var t=Object(W.c)(e);k(t),r.b.success({content:"Deleted!",key:"remove",duration:2})}),1e3)},handleEditPhoto:function(e){j(!0),setTimeout((function(){P.push("".concat(S.url,"/edit/").concat(e)),j(!1)}),1e3)},handleDownloadPhoto:function(e,t){s()({url:e,method:"GET",responseType:"blob"}).then((function(e){var a=window.URL.createObjectURL(new Blob([e.data])),c=document.createElement("a");c.href=a,c.setAttribute("download","".concat(t,".jpg")),document.body.appendChild(c),c.click(),c.parentNode.removeChild(c)}))}})]}),d&&Object(h.jsx)(u.d,{})]})},Y=a(752),H=a(35);function Q(e){var t=Object(H.a)("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789");return Object(H.a)(Array(e)).map((function(){return t[Math.trunc(Math.random()*t.length)]})).join("")}var X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=String(Date.now()),a=Math.ceil(t.length/2),c="".concat(t.substr(0,a),"-").concat(Q(6),"-").concat(t.substr(a));return e.prefix&&(c="".concat(e.prefix,"-").concat(c)),c};var Z=function(e){var t=Object(c.useState)(!1),a=Object(l.a)(t,2),o=a[0],i=a[1],s=Object(J.c)((function(e){return e.photos})),d=Object(J.b)(),j=Object(n.g)(),b=Object(n.h)().photoId,O=!b,p=s.find((function(e){return e.id===b})),f=O?{title:"",categoryId:null,photoUrl:""}:p;return Object(c.useState)((function(){i(!0),window.scrollTo(0,0),setTimeout((function(){i(!1)}),1e3)}),[]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(u.a,{title:O?"Add a awesome photo \ud83d\ude0e":"Edit your photo \ud83d\ude1a"}),Object(h.jsx)("div",{className:"content form-edit container",children:Object(h.jsx)(A,{isAddMode:O,initalValues:f,onSubmited:function(e){r.b.loading({content:"".concat(O?"Adding...":"Updating..."),key:"addedit"}),setTimeout((function(){if(O){var t=Object(Y.a)(Object(Y.a)({},e),{},{id:X({prefix:"photo"})}),a=Object(W.a)(t);d(a)}else{var c=Object(W.d)(e);d(c)}j.push("/photos"),r.b.success({content:"Done!",key:"addedit",duration:1})}),2e3)}})}),o&&Object(h.jsx)(u.d,{})]})};t.default=function(e){var t=Object(n.i)();return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(n.d,{children:[Object(h.jsx)(n.b,{exact:!0,path:t.url,component:K}),Object(h.jsx)(n.b,{path:"".concat(t.url,"/add"),component:Z}),Object(h.jsx)(n.b,{path:"".concat(t.url,"/edit/:photoId"),component:Z}),Object(h.jsx)(n.b,{component:u.e})]})})}}}]);
//# sourceMappingURL=4.9f63a594.chunk.js.map